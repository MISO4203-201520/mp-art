<alert ng-repeat="alert in alerts" type="{{alert.type}}" close="ctrl.closeAlert($index)">{{alert.msg}}</alert>
<div ng-hide="ctrl.detailsMode">
    <div class="col-sm-12">
        <div ng-repeat="record in records">
            <div class="col-sm-4 well text-center">
                <div class="col-md-12">
                    <div class="img-thumbnail" id="cover" ng-if="record.picture">
                        <a ng-href="{{record.picture}}" target="_blank"><img class="img-responsive" style="height: 20vw;" ng-src="{{record.picture}}" alt="{{record.picture}}"></a>
                    </div>
                </div>
                <div class="caption" >
                    <p><strong>{{model.fields[0].displayName}}: </strong> {{record.name}}</p>
                    <p><strong>{{model.fields[2].displayName}}: </strong> {{record.price| currency}}</p>
                    <p><strong>{{model.fields[3].displayName}}: </strong> {{record.artist.name}}</p>
                    <p ng-if=record.discount ng-style="{color:'red'}"><strong >{{model.fields[4].displayName}}: </strong>{{record.discount}} &#37; </p>
                </div>
                <p class="text-center">
                    <button ng-repeat="(key, action) in ctrl.recordActions" id="{{$parent.$index}}-{{key}}-btn" class="btn btn-{{action.class|| 'default'}} btn-sm" ng-show="action.show()" ng-click="action.fn(record)"><span class="glyphicon glyphicon-{{action.icon}}"></span> {{action.displayName}}</button>
                </p>
            </div>
        </div>
    </div>
    <div class="text-center">
        <pagination ng-show="ctrl.numPages > 1" num-pages="ctrl.numPages" total-items="ctrl.totalItems"
                    ng-model="ctrl.currentPage" ng-change="ctrl.pageChanged()" items-per-page="ctrl.itemsPerPage"
                    max-size="ctrl.maxSize" class="pagination-md" boundary-links="true" rotate="false"></pagination>
    </div>
</div>
<div ng-show="ctrl.detailsMode" ng-if="artworkRecord">
    <div class="panel panel-default">
        <div class="panel-heading">{{artworkRecord.name}}</div>
        <ul class="list-group" ng-repeat="remark in artworkRecord.remarks">
            <li class="list-group-item">
                {{remark.remarkDate}} - {{remark.description}} - <em>{{remark.remarkUser}}</em>
            </li>
        </ul>    
    </div>
    <a class="btn btn-default" ng-click="ctrl.detailsMode = false" >Back</a>
    <button ng-click="postRemark(artworkRecord.id, newRemark)" class="btn btn-default">POST</button>
    <input style="border:1px solid #000000" type="text" class="form-control" placeholder="Enter remark here..." maxlength="255" ng-model="newRemark" required>

</div>
<!-- Vista del modal-->
<div class="modal fade" id="questionModal" role="dialog">
    <!-- Definicion del espacio del modal -->
    <div class="modal-dialog">
        <!-- Contenido definido para el Modal -->  
        <div class="modal-content">

            <!-- Encabezado -->
            <div class="modal-header">
                <!-- Boton de cerrado -->
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <!-- Titulo del Modal -->
                <h4 class="modal-title" id = "titleModal">Question for the Artist</h4>
            </div>
            <div id = "userQuestion"></div>
            <div id = "artworkRef"></div>
            <div id = "artworkName"></div>
            <!-- Definicion del formulario para la pregunta -->
            <form ng-repeat="action in ctrl.saveQuestion" id="questionForm" method="post" class="form-horizontal" ng-submit="action.fn(record)">
                <!-- Forma del Formulario para la pregunta -->
                <div class="modal-body">
                    <div class="form-group">
                        <textarea class="form-control" rows="4" id="question" style = "wmargin: 0 auto;"></textarea>
                    </div>         
                </div>
                <!-- Footer del formulario de envio de preguntas -->
                <div class="modal-footer">
                    <!-- Boton de Close para cancelar el envio de la pregunta -->
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <!-- Boton de Send, para hacer envio de la pregunta -->
                    <button type="submit" class="btn btn-success">Send</button>
                </div>
            </form>
        </div>

    </div>
</div>
